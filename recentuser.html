<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Recent User Details</title>
</head>
<body>
	<div style="display: inline-block;width: 30%;">
	<div style="text-align: center;width: 100%;background: #f7e7b0;border-radius: 5px;" class="div1">
		<p><b>RECENT USER</b></p><br>
		<img style="border-radius: 50px;" width="100px" id="imgdips" src="img/user.png"><br>
		<p>NAME :</p><p id="name"></p><br><br>
		<p>EMAIL :</p><p id="email"></p><br><br>
		<p>PHONE :</p><p id="phone"></p><br><br>
	</div>
	<br>
	<div style="text-align: center;width: 100%;background: #f7e7b0;border-radius: 5px;" class="div1">
		<p><b>MESSAGE</b></p><br>
		<div>
		<p>SUBJECT :</p><p id="sub"></p><br><br>
		<p id="msg"></p><br><br>
		
	</div>
	</div>
</div>

	<div style="width: 60%;display: inline-block;margin-left: 5%;vertical-align: top;">
		

		<div style="width: 100%;background: #f7e7b0;border-radius: 5px;text-align: center;" class="div1">
			<p><b>PERSONAL DETAILS</b></p><br>
		<span id="details"></span>
		</div>
		<br>
		<div style="background: #f7e7b0; width: 55%;padding: 5px;text-align: center;border-radius: 5px;display: inline-block;" class="div1">
			<input type="text" name="" id="newelement" placeholder="ref.name">
			<input type="text" name="" id="newelement2" placeholder="value">
			<input type="button" value="add" onclick="addval()">
		</div>
		<div style="background: #f7e7b0; width: 40%;padding: 5px;text-align: center;border-radius: 5px;display: inline-block;margin-left: 1.5%;" class="div1">
			<input type="text" name="" id="del" placeholder="ref.name">
			
			<input type="button" value="Remove" onclick="remove()">
		</div>

		
	</div>

	



</body>
<script>


checkCookie();
	function setvalues()
	{
document.getElementById("name").innerHTML=getCookie("name");
document.getElementById("email").innerHTML=getCookie("email");
document.getElementById("phone").innerHTML=getCookie("phone");
document.getElementById("sub").innerHTML=localStorage.getItem("subject");
document.getElementById("msg").innerHTML=localStorage.getItem("message");
document.getElementById("details").innerHTML=listCookies();
document.getElementById("imgdips").src =getCookie("img");


	}

check(getCookie("color"));

function addval()
{
var ref=document.getElementById('newelement').value;
var ref2=document.getElementById('newelement2').value;

if(ref=="" || ref2=="")
{
	alert("Values cannot be empty");
}


else if(ref=="name" || ref=="phone" || ref=="email" || ref=="subject" || ref==msg)
{
	alert("Primary valus cant be modified");
}
else
{
	setCookie(ref,ref2,2);
	location.reload();
}


}


function remove()
{
var ref3=document.getElementById('del').value;


if(ref3=="")
{
	alert("Values cannot be empty");
}


else if(ref3=="name" || ref3=="phone" || ref3=="email" || ref3=="subject" || ref3=="msg" || ref3=="img" || ref3=="color")
{
	alert("Primary valus cant be deleted");
}
else
{
	document.cookie = ref3+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
	location.reload();
}


}





	
function checkCookie() {
  let username = getCookie("name");
  if (username != "") {
  	
   setvalues();
  } else {
    alert("No Recent users data found");
  }
}




	function getCookie(cname) {
  let name = cname + "=";
  let decodedCookie = decodeURIComponent(document.cookie);
  let ca = decodedCookie.split(';');
  for(let i = 0; i <ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}


function setCookie(cname, cvalue, exdays) {
  const d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  let expires = "expires="+ d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}


function listCookies() {
    var theCookies = document.cookie.split(';');
    var aString = '';
    for (var i = 1 ; i <= theCookies.length; i++) {
    	
    	
    		aString += i + ' ' + theCookies[i-1] + "<br><br>";
    	
        
    }
    return aString;
}

function check(x) {
    elements = document.getElementsByClassName("div1");
    for (var i = 0; i < elements.length; i++) {
        elements[i].style.backgroundColor=x;
    }
}
</script>
<style>
	p {
    font-size: 1rem;
    font-weight: 500;
    line-height: 0.2;
    white-space: nowrap;
    display: inline;
}
</style>
</html>